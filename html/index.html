<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/2c286dbf8b.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <script src="/flask_test/templates/resources/js/chart.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
        #theme_progress_card {
            text-align: center;
            display: inline-block;
            margin: 10px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #4579fc;">
        <div class="navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2">
            <a href="#" id="nav_title" class="navbar-brand justify-content-start font-weight bold text-light">Toy
                Project</a>
        </div>

        <div class="collapse navbar-collapse mx-auto order-0">
            <div class="input-group">
                <input class="form-control py-2 rounded-pill mr-1 pr-5" style="width: 600px;" type="search" id="tag"
                    name="tag" placeholder="태그를 입력하세요">
                <span class="input-group-append">
                    <button class="btn rounded-pill border-0 ml-n5" onclick="api_call();" type="button" id="button">
                        <i class="fa fa-search" style="color: #5c5c5c"></i>
                    </button>
                </span>
            </div>
        </div>
        <div class="navbar-collapse collapse w-100 order-3 dual-collapse2" style="poistion:relative">

        </div>
    </nav>

    <div class="card border-dark mb-3" style="min-width: 30rem; max-width: 30rem;">
        <h6 class="alert-heading">태그</h6>
        <p id="processed-tag" class="mb-0"></p>
    </div>
    </div>
    <div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">가볼만한 곳</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme1_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">가볼만한 곳 O</div>
                <div id="theme1_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">가볼만한 곳 x
                </div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">가족 여행</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme2_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">가족 여행 O</div>
                <div id="theme2_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">가족 여행 X
                </div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">관람</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme3_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">관람 O</div>
                <div id="theme3_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">관람 X
                </div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">맛집</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme4_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">맛집 O</div>
                <div id="theme4_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">맛집 X</div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">우정여행</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme5_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">우정여행 O</div>
                <div id="theme5_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">우정여행 X</div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">전통</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme6_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">전통 O</div>
                <div id="theme6_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">전통 X</div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">체험</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme7_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">체험 O</div>
                <div id="theme7_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">체험 X</div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">카페</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme8_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">카페 O</div>
                <div id="theme8_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">카페 X</div>
            </div>
        </div>
        <div class="card border-dark mb-3" id="theme_progress_card" style="min-width: 30rem; max-width: 30rem;">
            <div class="card-header" style=" padding:0.2rem 0.2rem;">캠핑</div>
            <div class="progress" style=" margin:0.5rem 0.5rem;">
                <div id="theme9_entailment" class="progress-bar bg-blue" role="progressbar" style="width: 100%">캠핑 O</div>
                <div id="theme9_contradiction" class="progress-bar bg-danger" role="progressbar" style="width: 0%">캠핑 X</div>
            </div>
        </div>
    </div>
    </div>
</body>

<script>
    function api_call() {
        var p = $("#tag").val();
        var input = { tag: p };
        console.log(input);
        console.log(JSON.stringify(input));
        $.ajax({
            url: "/api",
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(input),
            success: function (data, textStatus, jQxhr) {
                $('#processed-tag').html(data.tag);
                $('#theme1_entailment').html(data.theme1_entailment_data);
                $('#theme1_contradiction').html(data.theme1_contradiction_data);
                $('#theme1_entailment').css('width', data.theme1_entailment_width);
                $('#theme1_contradiction').css('width', data.theme1_contradiction_width);

                $('#theme2_entailment').html(data.theme2_entailment_data);
                $('#theme2_contradiction').html(data.theme2_contradiction_data);
                $('#theme2_entailment').css('width', data.theme2_entailment_width);
                $('#theme2_contradiction').css('width', data.theme2_contradiction_width);

                $('#theme3_entailment').html(data.theme3_entailment_data);
                $('#theme3_contradiction').html(data.theme3_contradiction_data);
                $('#theme3_entailment').css('width', data.theme3_entailment_width);
                $('#theme3_contradiction').css('width', data.theme3_contradiction_width);

                $('#theme4_entailment').html(data.theme4_entailment_data);
                $('#theme4_contradiction').html(data.theme4_contradiction_data);
                $('#theme4_entailment').css('width', data.theme4_entailment_width);
                $('#theme4_contradiction').css('width', data.theme4_contradiction_width);

                $('#theme5_entailment').html(data.theme5_entailment_data);
                $('#theme5_contradiction').html(data.theme5_contradiction_data);
                $('#theme5_entailment').css('width', data.theme5_entailment_width);
                $('#theme5_contradiction').css('width', data.theme5_contradiction_width);
                $("#tag").val("");
            },
            error: function (jqXhr, textStatus, errorThrown) {
                $('#api_output').html("There was an error");
                console.log(errorThrown);
            },
            timeout: 3000
        });
    }
</script>